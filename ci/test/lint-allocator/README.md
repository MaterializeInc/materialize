## Dependency lints

In this directory, we store the expected output of dependency lints.
At the moment, this is limited to linting the status of `jemalloc` dependencies, but it could be extended to others in the future.
Each file corresponds to a target architecture and a set of features.
Currently, the architectures we check are `x86_64-unknown-linux-gnu` for 64-bit Linux OSs, and `aarch64-apple-darwin` for ARM64-based Mac releases.
This is crossed with the `default` features, and `no-default-features`.

The files correspond to the output of `cargo tree` with an inverse tree for a specific set of packages.
At the moment, it is limited to `tikv-jemallocator`.
Each line starts with the depth of the inverse dependency tree, followed by the name of the lib crate that include the dependency.
Lastly, it lists the effective flags.
All fields are separated by colons.

The files are checked and generated by [`lint-allocator.sh`](../lint-allocator.sh).
Use the `--rewrite` option to update the files if the set of dependencies or features change.
However, note the specifics for `jemalloc` below.

### Specifics for `jemalloc`

We enable `jemalloc` by default on all non-mac platforms, unless `--no-default-features` is enabled.
In this case, `jemalloc` should be disabled on all platforms.
To quickly determine the validity of changes, check that only the file `x86_64-unknown-linux-gnu-default` mentions the `tikv-jemallocator` dependency, and all others don't.
