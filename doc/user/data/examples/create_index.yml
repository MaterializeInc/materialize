- name: "syntax"
  code: |
    CREATE INDEX [<index_name>]
    [IN CLUSTER <cluster_name>]
    ON <obj_name> [USING <method>] (<col_expr>, ...)
    [WITH (<with_options>)];
  syntax_elements:
    - name: "`<index_name>`"
      description: |
        A name for the index.
    - name: "`IN CLUSTER <cluster_name>`"
      description: |
        The [cluster](/sql/create-cluster) to maintain this index. If not
        specified, defaults to the active cluster.
    - name: "`<obj_name>`"
      description: |
        The name of the source, view, or materialized view on which you want
        to create an index.
    - name: "`USING <method>`"
      description: |
        The name of the index method to use. The only supported method is
        [`arrangement`](/overview/arrangements).
    - name: "`(<col_expr>, ...)`"
      description: |
        The expressions to use as the key for the index.
    - name: "`WITH (<with_option>[,...])`"
      description: |
        The following `<with_option>` is supported:
        | Option                     | Description |
        |----------------------------|-------------|
        | `RETAIN HISTORY FOR`    |  ***Private preview.** This option has known performance or stability issues and is under active development.* Duration for which Materialize retains historical data, which is useful to implement [durable subscriptions](/transform-data/patterns/durable-subscriptions/#history-retention-period). **Note:** Configuring indexes to retain history is not recommended. Instead, consider creating a materialized view for your subscription query and configuring the history retention period on the view instead. See [durable subscriptions](/transform-data/patterns/durable-subscriptions/#history-retention-period). Accepts positive [interval](/sql/types/interval/) values (e.g. `'1hr'`). Default: `1s`. |

- name: "syntax-default"
  code: |
    CREATE DEFAULT INDEX
    [IN CLUSTER <cluster_name>]
    ON <obj_name> [USING <method>]
    [WITH (<with_options>)];
  syntax_elements:
    - name: "`IN CLUSTER <cluster_name>`"
      description: |
        The [cluster](/sql/create-cluster) to maintain this index. If not
        specified, defaults to the active cluster.
    - name: "`<obj_name>`"
      description: |
        The name of the source, view, or materialized view on which you want
        to create an index.
    - name: "`USING <method>`"
      description: |
        The name of the index method to use. The only supported method is
        [`arrangement`](/overview/arrangements).
    - name: "`WITH (<with_option>[,...])`"
      description: |
        The following `<with_option>` is supported:
        | Option                     | Description |
        |----------------------------|-------------|
        | `RETAIN HISTORY FOR`    |  ***Private preview.** This option has known performance or stability issues and is under active development.* Duration for which Materialize retains historical data, which is useful to implement [durable subscriptions](/transform-data/patterns/durable-subscriptions/#history-retention-period). **Note:** Configuring indexes to retain history is not recommended. Instead, consider creating a materialized view for your subscription query and configuring the history retention period on the view instead. See [durable subscriptions](/transform-data/patterns/durable-subscriptions/#history-retention-period). Accepts positive [interval](/sql/types/interval/) values (e.g. `'1hr'`). Default: `1s`. |
