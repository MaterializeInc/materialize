- name: "syntax"
  code: |
    CREATE SOURCE [IF NOT EXISTS] <src_name>
    [IN CLUSTER <cluster_name>]
    FROM LOAD GENERATOR <generator_type> [
      (
        [TICK INTERVAL <tick_interval>]
        [, AS OF <tick>]
        [, UP TO <tick>]
        [, SCALE FACTOR <scale_factor>]
        [, MAX CARDINALITY <max_cardinality>]
        [, KEYS <keys>]
        [, SNAPSHOT ROUNDS <snapshot_rounds>]
        [, TRANSACTIONAL SNAPSHOT <transactional_snapshot>]
        [, VALUE SIZE <value_size>]
        [, SEED <seed>]
        [, PARTITIONS <partitions>]
        [, BATCH SIZE <batch_size>]
      )
    ]
    FOR ALL TABLES
    [EXPOSE PROGRESS AS <progress_subsource_name>]
    [WITH (RETAIN HISTORY FOR <retention_period>)]
  syntax_elements:
    - name: "`<src_name>`"
      description: |
        The name for the source.
    - name: "**IF NOT EXISTS**"
      description: |
        Optional. If specified, do not throw an error if a source with the same name already exists. Instead, issue a notice and skip the source creation.
    - name: "**IN CLUSTER** `<cluster_name>`"
      description: |
        Optional. The [cluster](/sql/create-cluster) to maintain this source.
    - name: "**FROM LOAD GENERATOR** `<generator_type>`"
      description: |
        The type of load generator to use. Valid generator types:

        | Generator | Description |
        |-----------|-------------|
        | `AUCTION` | Use the [auction](#auction) load generator. |
        | `MARKETING` | Use the [marketing](#marketing) load generator. |
        | `TPCH` | Use the [tpch](#tpch) load generator. |
        | `KEY VALUE` | Use the key-value load generator. |
    - name: "**TICK INTERVAL** `<tick_interval>`"
      description: |
        Optional. The interval at which the next datum should be emitted. Defaults to one second.
    - name: "**AS OF** `<tick>`"
      description: |
        Optional. {{< warn-if-unreleased-inline "v0.101" >}} The tick at which to start producing data. Defaults to 0.
    - name: "**UP TO** `<tick>`"
      description: |
        Optional. {{< warn-if-unreleased-inline "v0.101" >}} The tick before which to stop producing data. Defaults to infinite.
    - name: "**SCALE FACTOR** `<scale_factor>`"
      description: |
        Optional. The scale factor for the `TPCH` generator. Defaults to `0.01` (~ 10MB).
    - name: "**MAX CARDINALITY** `<max_cardinality>`"
      description: |
        Optional. The maximum cardinality for the generator.
    - name: "**KEYS** `<keys>`"
      description: |
        Optional. The number of keys for the generator.
    - name: "**SNAPSHOT ROUNDS** `<snapshot_rounds>`"
      description: |
        Optional. The number of snapshot rounds for the generator.
    - name: "**TRANSACTIONAL SNAPSHOT** `<transactional_snapshot>`"
      description: |
        Optional. Whether to use transactional snapshots.
    - name: "**VALUE SIZE** `<value_size>`"
      description: |
        Optional. The size of values for the generator.
    - name: "**SEED** `<seed>`"
      description: |
        Optional. The seed for random number generation.
    - name: "**PARTITIONS** `<partitions>`"
      description: |
        Optional. The number of partitions for the generator.
    - name: "**BATCH SIZE** `<batch_size>`"
      description: |
        Optional. The batch size for the generator.
    - name: "**FOR ALL TABLES**"
      description: |
        Creates subsources for all tables in the load generator.
    - name: "**EXPOSE PROGRESS AS** `<progress_subsource_name>`"
      description: |
        Optional. The name of the progress subsource for the source. If this is not specified, the subsource will be named `<src_name>_progress`. For more information, see [Monitoring source progress](#monitoring-source-progress).
    - name: "**WITH** (`<with_option>` [, ...])"
      description: |
        Optional. The following `<with_option>`s are supported:

        | Option | Description |
        |--------|-------------|
        | `RETAIN HISTORY FOR <retention_period>` | ***Private preview.** This option has known performance or stability issues and is under active development.* Duration for which Materialize retains historical data, which is useful to implement [durable subscriptions](/transform-data/patterns/durable-subscriptions/#history-retention-period). Accepts positive [interval](/sql/types/interval/) values (e.g. `'1hr'`). Default: `1s`. |
