- name: "syntax"
  code: |
    CREATE SOURCE [IF NOT EXISTS] <src_name>
    [IN CLUSTER <cluster_name>]
    FROM SQL SERVER CONNECTION <connection_name>
      [ ( EXCLUDE COLUMNS (<col1> [, ...]) ) ]
    <FOR ALL TABLES | FOR TABLES ( <table1> [AS <subsrc_name>] [, ...] )>
    [WITH (RETAIN HISTORY FOR <retention_period>)]
  syntax_elements:
    - name: "`<src_name>`"
      description: |
        The name for the source.
    - name: "**IF NOT EXISTS**"
      description: |
        Optional. If specified, do not throw an error if a source with the same name already exists. Instead, issue a notice and skip the source creation.
    - name: "**IN CLUSTER** `<cluster_name>`"
      description: |
        Optional. The [cluster](/sql/create-cluster) to maintain this source.
    - name: "**CONNECTION** `<connection_name>`"
      description: |
        The name of the SQL Server connection to use in the source. For details on creating connections, check the [`CREATE CONNECTION`](/sql/create-connection/#sql-server) documentation page.
    - name: "**EXCLUDE COLUMNS** ( `<col1>` [, ...] )"
      description: |
        Optional. Exclude specific columns that cannot be decoded or should not be included in the subsources created in Materialize.
    - name: "**FOR** `<table_schema_specification>`"
      description: |
        Specifies which tables to create subsources for. The following `<table_schema_specification>`s are supported:

        | Option | Description |
        |--------|-------------|
        | `ALL TABLES` | Create subsources for all tables with CDC enabled in all schemas upstream. |
        | `TABLES ( <table1> [AS <subsrc_name>] [, ...] )` | Create subsources for specific tables upstream. Requires fully-qualified table names (`<schema1>.<table1>`). |
    - name: "**WITH** (`<with_option>` [, ...])"
      description: |
        Optional. The following `<with_option>`s are supported:

        | Option | Description |
        |--------|-------------|
        | `RETAIN HISTORY FOR <retention_period>` | ***Private preview.** This option has known performance or stability issues and is under active development.* Duration for which Materialize retains historical data, which is useful to implement [durable subscriptions](/transform-data/patterns/durable-subscriptions/#history-retention-period). Accepts positive [interval](/sql/types/interval/) values (e.g. `'1hr'`). Default: `1s`. |
