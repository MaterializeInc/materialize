- name: "syntax"
  description: |
    To create a new read-write table (i.e., users can perform
    [`SELECT`](/sql/select/), [`INSERT`](/sql/insert/),
    [`UPDATE`](/sql/update/), and [`DELETE`](/sql/delete/) operations):

  code: |
    CREATE [TEMP|TEMPORARY] TABLE [IF NOT EXISTS] <table_name> (
      <column_name> <column_type> [NOT NULL][DEFAULT <default_expr>]
      [, ...]
    )
    [WITH (
      PARTITION BY (<column_name> [, ...]) |
      RETAIN HISTORY [=] FOR <duration>
    )]
    ;
  syntax_elements:
    - name: "**TEMP** / **TEMPORARY**"
      description: |
        *Optional.* If specified, mark the table as temporary.

        Temporary tables are:
        - Automatically dropped at the end of the session;
        - Not visible to other connections;
        - Created in the special `mz_temp` schema.

        Temporary tables may depend upon other temporary database objects, but
        non-temporary tables may not depend on temporary objects.

    - name: "**IF NOT EXISTS**"
      description: |
        *Optional.* If specified, do not throw an error if the table with the same
        name already exists. Instead, issue a notice and skip the table creation.

    - name: "`<table_name>`"
      description: |

        The name of the table to create. Names for tables must follow the [naming
        guidelines](/sql/identifiers/#naming-restrictions).

    - name: "`<column_name>`"
      description: |

        The name of a column to be created in the new table. Names for columns
        must follow the [naming guidelines](/sql/identifiers/#naming-restrictions).

    - name: "`<column_type>`"
      description: |

        The type of the column. For supported types, see [SQL data types](/sql/types/).

    - name: "**NOT NULL**"
      description: |
        *Optional.* If specified, disallow  _NULL_ values for the column. Columns without this constraint can contain _NULL_ values.
    - name: "**DEFAULT <default_expr>**"
      description: |
        *Optional.* If specified, use the `<default_expr>` as the default value for the column. If not specified, `NULL` is used as the default value.
    - name: "**WITH (<with_option>[,...])**"
      description: |

        The following `<with_option>`s are supported:

        | Option | Description |
        |--------|-------------|
        | `PARTITION BY (<column> [, ...])` | {{< include-md file="shared-content/partition-by-option-description.md" >}} |
        | `RETAIN HISTORY <duration>` | *Optional.* ***Private preview.** This option has known performance or stability issues and is under active development.* <br>If specified, Materialize retains historical data for the specified duration, which is useful to implement [durable subscriptions](/transform-data/patterns/durable-subscriptions/#history-retention-period).<br>Accepts positive [interval](/sql/types/interval/) values (e.g., `'1hr'`).|

- name: "create-table"
  description: |
    The following example uses `CREATE TABLE` to create a new read-write table
    `mytable` with two columns `a` (of type `int`) and `b` (of type `text` and
    not nullable):
  code: |
    CREATE TABLE mytable (a int, b text NOT NULL);

- name: "show-tables"
  description: |
    To verify that the table has been created, you can run [`SHOW
    TABLES`](/sql/show-tables/) to list all tables in the current [schema](/sql/namespaces/#namespace-hierarchy):
  code: |
    SHOW TABLES;
  results: |
    The results should include the table `mytable`:

    ```hc {hl_lines="3"}
    | name       | comment |
    | ---------- | ------- |
    | mytable    |         |
    ```

- name: "show-columns"
  description: |
    Inspect the table columns using the [`SHOW COLUMNS`](/sql/show-columns/) command:
  code: |
    SHOW COLUMNS FROM mytable;
  results: |
    The results should display information on columns `a` and `b`; these should
    match the specification in your `CREATE TABLE` statement:

    ```none
    | name | nullable | type    | comment |
    | ---- | -------- | ------- | ------- |
    | a    | true     | integer |         |
    | b    | false    | text    |         |
    ```

- name: "write-to-table"
  description: |
    The following example uses [`INSERT`](/sql/insert/) to write two rows to the table:
  code: |
    INSERT INTO mytable VALUES
    (1, 'hello'),
    (2, 'goodbye')
    ;

- name: "read-from-table"
  description: |
    The following example uses [`SELECT`](/sql/select/) to read all rows from the table:
  code: |
    SELECT * FROM mytable;
  results: |
    The results should display the two rows inserted:

    ```hc {hl_lines="3-4"}
    | a | b       |
    | - | ------- |
    | 1 | hello   |
    | 2 | goodbye |
    ```
