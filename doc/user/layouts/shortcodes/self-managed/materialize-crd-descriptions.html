<!-- build a dict of type names -->
{{ $types := dict }}
{{ range $.Site.Data.self_managed.materialize_crd_descriptions }}
{{ $types = merge $types (dict (index . 0) true) }}
{{ end }}

{{ range $.Site.Data.self_managed.materialize_crd_descriptions }}
#### {{ index . 0 }}
<table>
<thead>
<tr>
<th>Field Name</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
{{- range (index . 1) }}
  {{- if not .deprecated }}
<tr>
<td><code>{{ .name }}</code></td>
<td>{{ if .required }}âœ…{{ end }}</td>
<td>
  {{- $matches := findRESubmatch `(Array<|Map<String, )*([^>]+)(>*)` .type 1 -}}
  {{- $captures := index $matches 0 -}}

  {{- $typePrefix := index $captures 1 -}}
  {{- $baseType := index $captures 2 -}}
  {{- $typeSuffix := index $captures 3 -}}
<em><strong>
  {{- $typePrefix -}}
  {{- if (index $types $baseType) -}}
    <a href='#{{ replace $baseType "." "" | urlize}}'>
  {{- end -}}
  {{ $baseType }}
  {{- if (index $types $baseType) -}}
    </a>
  {{- end -}}
  {{- $typeSuffix -}}
</strong></em>
<br>
  {{- .description | markdownify }}{{ if .default }}
<br>
<br>
<strong>Default:</strong> <code>{{ .default }}</code>{{ end }}</td>
</tr>
  {{- end }}
{{- end }}
</tbody>
</table>
{{ end }}
