{{- $column := .Get "column" -}}
{{- $numColumns := .Get "numColumns" | default "1" -}}
{{- $label := .Get "label" -}}
{{ $pathArray := split (lower (.Get "data")) "/" }}
{{ $data := $.Site.Data }}

{{ range $pathArray }}
  {{ $data = index $data . }}
{{ end }}

{{ if $label }}

  {{- $filteredRows := slice -}}
  {{- range $data.rows -}}
    {{- if in .labels $label -}}
      {{- $filteredRows = $filteredRows | append . -}}
    {{- end -}}
  {{- end -}}

  <ul style="column-count: {{ $numColumns }}">
    {{- range $filteredRows -}}
      {{- $command := index . "command" -}}
      <li>{{ $command | markdownify }}</li>
    {{- end -}}
  </ul>
{{ else }}
  <ul style="column-count: {{ $numColumns }}" >
    {{- range $data.rows -}}
      {{- $value := index . $column -}}
      <li>{{ $value | markdownify }}</li>
    {{- end -}}
  </ul>
{{ end }}
