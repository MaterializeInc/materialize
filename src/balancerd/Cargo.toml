[package]
name = "mz-balancerd"
description = "Balancer service."
version = "0.133.0-dev.0"
edition.workspace = true
rust-version.workspace = true
publish = false

[lints]
workspace = true

[dependencies]
anyhow = { version = "1.0.66", features = ["backtrace"] }
async-trait = "0.1.83"
axum = "0.7.5"
bytes = "1.3.0"
bytesize = "1.1.0"
chrono = { version = "0.4.35", default-features = false, features = ["std"] }
clap = { version = "4.5.23", features = ["derive", "env"] }
domain = { version = "0.9.3", default-features = false, features = ["resolv"] }
futures = "0.3.25"
humantime = "2.1.0"
hyper = { version = "1.4.1", features = ["http1", "server"] }
hyper-openssl = "0.10.2"
hyper-util = "0.1.6"
jsonwebtoken = "9.2.0"
launchdarkly-server-sdk = { version = "1.0.0", default-features = false }
mz-alloc = { path = "../alloc" }
mz-alloc-default = { path = "../alloc-default", optional = true }
mz-build-info = { path = "../build-info" }
mz-dyncfg-launchdarkly = { path = "../dyncfg-launchdarkly" }
mz-dyncfg = { path = "../dyncfg" }
mz-frontegg-auth = { path = "../frontegg-auth" }
mz-http-util = { path = "../http-util" }
mz-orchestrator-tracing = { path = "../orchestrator-tracing" }
mz-ore = { path = "../ore", default-features = false }
mz-server-core = { path = "../server-core" }
mz-tracing = { path = "../tracing" }
mz-pgwire-common = { path = "../pgwire-common" }
num_cpus = "1.14.0"
openssl = { version = "0.10.48", features = ["vendored"] }
prometheus = { version = "0.13.3", default-features = false }
proxy-header = "0.1.2"
semver = "1.0.16"
tokio = { version = "1.38.0", default-features = false }
tokio-openssl = "0.6.3"
tokio-postgres = { version = "0.7.8" }
tokio-util = { version = "0.7.4", features = ["codec"] }
tower = "0.4.13"
tracing = "0.1.37"
tracing-subscriber = "0.3.16"
uuid = "1.2.2"
workspace-hack = { version = "0.0.0", path = "../workspace-hack", optional = true }

[dev-dependencies]
mz-environmentd = { path = "../environmentd", default-features = false, features = ["test"] }
mz-frontegg-mock = { path = "../frontegg-mock" }
postgres = "0.19.5"
reqwest = "0.11.24"
tempfile = "3.14.0"

[features]
default = ["mz-alloc-default", "workspace-hack"]
jemalloc = ["mz-alloc/jemalloc"]

[package.metadata.cargo-udeps.ignore]
normal = ["workspace-hack", "mz-alloc-default"]
