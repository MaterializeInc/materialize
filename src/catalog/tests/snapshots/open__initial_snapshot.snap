---
source: src/catalog/tests/open.rs
expression: test_snapshot
---
Snapshot {
    databases: {
        DatabaseKey {
            id: Some(
                DatabaseId {
                    value: Some(
                        User(
                            1,
                        ),
                    ),
                },
            ),
        }: DatabaseValue {
            name: "materialize",
            owner_id: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
            privileges: [
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                Public(
                                    Empty,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    2,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 768,
                        },
                    ),
                },
            ],
            oid: 20000,
        },
    },
    schemas: {
        SchemaKey {
            id: Some(
                SchemaId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
        }: SchemaValue {
            database_id: None,
            name: "mz_catalog",
            owner_id: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
            privileges: [
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                Public(
                                    Empty,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    2,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 768,
                        },
                    ),
                },
            ],
            oid: 16656,
        },
        SchemaKey {
            id: Some(
                SchemaId {
                    value: Some(
                        System(
                            2,
                        ),
                    ),
                },
            ),
        }: SchemaValue {
            database_id: None,
            name: "pg_catalog",
            owner_id: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
            privileges: [
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                Public(
                                    Empty,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    2,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 768,
                        },
                    ),
                },
            ],
            oid: 16657,
        },
        SchemaKey {
            id: Some(
                SchemaId {
                    value: Some(
                        System(
                            4,
                        ),
                    ),
                },
            ),
        }: SchemaValue {
            database_id: None,
            name: "mz_internal",
            owner_id: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
            privileges: [
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                Public(
                                    Empty,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    2,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 768,
                        },
                    ),
                },
            ],
            oid: 16658,
        },
        SchemaKey {
            id: Some(
                SchemaId {
                    value: Some(
                        System(
                            5,
                        ),
                    ),
                },
            ),
        }: SchemaValue {
            database_id: None,
            name: "information_schema",
            owner_id: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
            privileges: [
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                Public(
                                    Empty,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    2,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 768,
                        },
                    ),
                },
            ],
            oid: 16659,
        },
        SchemaKey {
            id: Some(
                SchemaId {
                    value: Some(
                        System(
                            6,
                        ),
                    ),
                },
            ),
        }: SchemaValue {
            database_id: None,
            name: "mz_unsafe",
            owner_id: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
            privileges: [
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                Public(
                                    Empty,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    2,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 768,
                        },
                    ),
                },
            ],
            oid: 16660,
        },
        SchemaKey {
            id: Some(
                SchemaId {
                    value: Some(
                        User(
                            3,
                        ),
                    ),
                },
            ),
        }: SchemaValue {
            database_id: Some(
                DatabaseId {
                    value: Some(
                        User(
                            1,
                        ),
                    ),
                },
            ),
            name: "public",
            owner_id: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
            privileges: [
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                Public(
                                    Empty,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    2,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 768,
                        },
                    ),
                },
            ],
            oid: 20001,
        },
    },
    roles: {
        RoleKey {
            id: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
        }: RoleValue {
            name: "mz_system",
            attributes: Some(
                RoleAttributes {
                    inherit: true,
                },
            ),
            membership: Some(
                RoleMembership {
                    map: [],
                },
            ),
            vars: Some(
                RoleVars {
                    entries: [],
                },
            ),
            oid: 16661,
        },
        RoleKey {
            id: Some(
                RoleId {
                    value: Some(
                        System(
                            2,
                        ),
                    ),
                },
            ),
        }: RoleValue {
            name: "mz_support",
            attributes: Some(
                RoleAttributes {
                    inherit: true,
                },
            ),
            membership: Some(
                RoleMembership {
                    map: [],
                },
            ),
            vars: Some(
                RoleVars {
                    entries: [],
                },
            ),
            oid: 16662,
        },
        RoleKey {
            id: Some(
                RoleId {
                    value: Some(
                        System(
                            3,
                        ),
                    ),
                },
            ),
        }: RoleValue {
            name: "mz_monitor",
            attributes: Some(
                RoleAttributes {
                    inherit: true,
                },
            ),
            membership: Some(
                RoleMembership {
                    map: [],
                },
            ),
            vars: Some(
                RoleVars {
                    entries: [],
                },
            ),
            oid: 16663,
        },
        RoleKey {
            id: Some(
                RoleId {
                    value: Some(
                        System(
                            4,
                        ),
                    ),
                },
            ),
        }: RoleValue {
            name: "mz_monitor_redacted",
            attributes: Some(
                RoleAttributes {
                    inherit: true,
                },
            ),
            membership: Some(
                RoleMembership {
                    map: [],
                },
            ),
            vars: Some(
                RoleVars {
                    entries: [],
                },
            ),
            oid: 16664,
        },
        RoleKey {
            id: Some(
                RoleId {
                    value: Some(
                        Public(
                            Empty,
                        ),
                    ),
                },
            ),
        }: RoleValue {
            name: "public",
            attributes: Some(
                RoleAttributes {
                    inherit: true,
                },
            ),
            membership: Some(
                RoleMembership {
                    map: [],
                },
            ),
            vars: Some(
                RoleVars {
                    entries: [],
                },
            ),
            oid: 16944,
        },
    },
    items: {},
    comments: {},
    clusters: {
        ClusterKey {
            id: Some(
                ClusterId {
                    value: Some(
                        User(
                            1,
                        ),
                    ),
                },
            ),
        }: ClusterValue {
            name: "quickstart",
            owner_id: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
            privileges: [
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                Public(
                                    Empty,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    2,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 256,
                        },
                    ),
                },
                MzAclItem {
                    grantee: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    grantor: Some(
                        RoleId {
                            value: Some(
                                System(
                                    1,
                                ),
                            ),
                        },
                    ),
                    acl_mode: Some(
                        AclMode {
                            bitflags: 768,
                        },
                    ),
                },
            ],
            config: Some(
                ClusterConfig {
                    variant: Some(
                        Managed(
                            ManagedCluster {
                                size: "1",
                                replication_factor: 1,
                                availability_zones: [],
                                logging: Some(
                                    ReplicaLogging {
                                        log_logging: false,
                                        interval: Some(
                                            Duration {
                                                secs: 1,
                                                nanos: 0,
                                            },
                                        ),
                                    },
                                ),
                                idle_arrangement_merge_effort: None,
                                disk: false,
                                optimizer_feature_overrides: [],
                            },
                        ),
                    ),
                },
            ),
        },
    },
    cluster_replicas: {
        ClusterReplicaKey {
            id: Some(
                ReplicaId {
                    value: Some(
                        User(
                            1,
                        ),
                    ),
                },
            ),
        }: ClusterReplicaValue {
            cluster_id: Some(
                ClusterId {
                    value: Some(
                        User(
                            1,
                        ),
                    ),
                },
            ),
            name: "r1",
            config: Some(
                ReplicaConfig {
                    logging: Some(
                        ReplicaLogging {
                            log_logging: false,
                            interval: Some(
                                Duration {
                                    secs: 1,
                                    nanos: 0,
                                },
                            ),
                        },
                    ),
                    idle_arrangement_merge_effort: None,
                    location: Some(
                        Managed(
                            ManagedLocation {
                                size: "1",
                                availability_zone: None,
                                disk: false,
                                internal: false,
                                billed_as: None,
                            },
                        ),
                    ),
                },
            ),
            owner_id: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
        },
    },
    introspection_sources: {},
    id_allocator: {
        IdAllocKey {
            name: "auditlog",
        }: IdAllocValue {
            next_id: 12,
        },
        IdAllocKey {
            name: "database",
        }: IdAllocValue {
            next_id: 2,
        },
        IdAllocKey {
            name: "oid",
        }: IdAllocValue {
            next_id: 20002,
        },
        IdAllocKey {
            name: "replica",
        }: IdAllocValue {
            next_id: 2,
        },
        IdAllocKey {
            name: "schema",
        }: IdAllocValue {
            next_id: 7,
        },
        IdAllocKey {
            name: "storage_usage",
        }: IdAllocValue {
            next_id: 1,
        },
        IdAllocKey {
            name: "system",
        }: IdAllocValue {
            next_id: 1,
        },
        IdAllocKey {
            name: "system_compute",
        }: IdAllocValue {
            next_id: 1,
        },
        IdAllocKey {
            name: "system_replica",
        }: IdAllocValue {
            next_id: 1,
        },
        IdAllocKey {
            name: "user",
        }: IdAllocValue {
            next_id: 1,
        },
        IdAllocKey {
            name: "user_compute",
        }: IdAllocValue {
            next_id: 2,
        },
        IdAllocKey {
            name: "user_role",
        }: IdAllocValue {
            next_id: 1,
        },
    },
    configs: {
        ConfigKey {
            key: "deploy_generation",
        }: ConfigValue {
            value: 0,
        },
        ConfigKey {
            key: "system_config_synced",
        }: ConfigValue {
            value: 0,
        },
    },
    settings: {},
    timestamps: {
        TimestampKey {
            id: "M",
        }: TimestampValue {
            ts: Some(
                Timestamp {
                    internal: 0,
                },
            ),
        },
    },
    system_object_mappings: {},
    system_configurations: {},
    default_privileges: {
        DefaultPrivilegesKey {
            role_id: Some(
                RoleId {
                    value: Some(
                        Public(
                            Empty,
                        ),
                    ),
                },
            ),
            database_id: None,
            schema_id: None,
            object_type: Type,
            grantee: Some(
                RoleId {
                    value: Some(
                        Public(
                            Empty,
                        ),
                    ),
                },
            ),
        }: DefaultPrivilegesValue {
            privileges: Some(
                AclMode {
                    bitflags: 256,
                },
            ),
        },
        DefaultPrivilegesKey {
            role_id: Some(
                RoleId {
                    value: Some(
                        Public(
                            Empty,
                        ),
                    ),
                },
            ),
            database_id: None,
            schema_id: None,
            object_type: Cluster,
            grantee: Some(
                RoleId {
                    value: Some(
                        System(
                            2,
                        ),
                    ),
                },
            ),
        }: DefaultPrivilegesValue {
            privileges: Some(
                AclMode {
                    bitflags: 256,
                },
            ),
        },
        DefaultPrivilegesKey {
            role_id: Some(
                RoleId {
                    value: Some(
                        Public(
                            Empty,
                        ),
                    ),
                },
            ),
            database_id: None,
            schema_id: None,
            object_type: Database,
            grantee: Some(
                RoleId {
                    value: Some(
                        System(
                            2,
                        ),
                    ),
                },
            ),
        }: DefaultPrivilegesValue {
            privileges: Some(
                AclMode {
                    bitflags: 256,
                },
            ),
        },
        DefaultPrivilegesKey {
            role_id: Some(
                RoleId {
                    value: Some(
                        Public(
                            Empty,
                        ),
                    ),
                },
            ),
            database_id: None,
            schema_id: None,
            object_type: Schema,
            grantee: Some(
                RoleId {
                    value: Some(
                        System(
                            2,
                        ),
                    ),
                },
            ),
        }: DefaultPrivilegesValue {
            privileges: Some(
                AclMode {
                    bitflags: 256,
                },
            ),
        },
    },
    system_privileges: {
        SystemPrivilegesKey {
            grantee: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
            grantor: Some(
                RoleId {
                    value: Some(
                        System(
                            1,
                        ),
                    ),
                },
            ),
        }: SystemPrivilegesValue {
            acl_mode: Some(
                AclMode {
                    bitflags: 3758096384,
                },
            ),
        },
    },
    storage_metadata: {},
    unfinalized_shards: {},
    persist_txn_shard: {},
}
