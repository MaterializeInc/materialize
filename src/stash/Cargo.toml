[package]
name = "mz-stash"
description = "Durable metadata storage."
version = "0.0.0"
edition.workspace = true
rust-version.workspace = true
publish = false

[[bench]]
name = "postgres"
harness = false

[dependencies]
anyhow = { workspace = true }
bitflags = { workspace = true }
bytes = { workspace = true }
differential-dataflow = { workspace = true }
fail = { workspace = true, features = ["failpoints"] }
futures = { workspace = true }
itertools = { workspace = true }
mz-ore = { workspace = true, features = ["metrics", "network", "async", "test"] }
mz-postgres-util = { workspace = true }
postgres-openssl = { workspace = true }
prometheus = { workspace = true, default-features = false }
proptest = { workspace = true, default-features = false, features = ["std"] }
proptest-derive = { workspace = true, features = ["boxed_union"]}
prost = { workspace = true, features = ["no-recursion-limit"] }
rand = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
timely = { workspace = true, default-features = false }
tokio = { workspace = true }
tokio-postgres = { workspace = true, features = [ "with-serde_json-1" ] }
tracing = { workspace = true }
uuid = { workspace = true }
workspace-hack = { version = "0.0.0", path = "../workspace-hack" }

[dev-dependencies]
anyhow = { workspace = true }
criterion = { workspace = true, features = ["async_tokio"] }
mz-postgres-util = { workspace = true }
once_cell = { workspace = true }
tokio = { workspace = true, features = ["rt", "time"] }

[build-dependencies]
anyhow = { workspace = true }
md-5 = { workspace = true }
protobuf-src = { workspace = true }
prost-build = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }

[package.metadata.cargo-udeps.ignore]
normal = ["workspace-hack"]
