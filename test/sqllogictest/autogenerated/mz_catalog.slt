
# Copyright Materialize, Inc. and contributors. All rights reserved.
#
# Use of this software is governed by the Business Source License
# included in the LICENSE file at the root of this repository.
#
# As of the Change Date specified in that file, in accordance with
# the Business Source License, use of this software will be governed
# by the Apache License, Version 2.0.

# This file is auto-generated by ci/test/lint-docs-catalog.py

mode cockroach

statement ok
CREATE VIEW objects AS
  SELECT
    schema.name AS schema,
    objects.name AS object,
    columns.position,
    columns.name,
    columns.type
  FROM
    mz_catalog.mz_columns AS columns,
    mz_catalog.mz_objects AS objects,
    mz_catalog.mz_schemas AS schema
  WHERE columns.id = objects.id AND objects.schema_id = schema.id

statement ok
CREATE INDEX objects_idx ON objects(schema, object)

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_array_types' ORDER BY position
----
1  id  text
2  element_id  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_audit_events' ORDER BY position
----
1  id    uint8
2  event_type  text
3  object_type  text
4  details  jsonb
5  user  text
6  occurred_at  timestamp␠with␠time␠zone

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_aws_privatelink_connections' ORDER BY position
----
1  id  text
2  principal  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_base_types' ORDER BY position
----
1  id  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_cluster_replicas' ORDER BY position
----
1  id  text
2  name  text
3  cluster_id  text
4  size  text
5  availability_zone  text
6  owner_id  text
7  disk  boolean

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_clusters' ORDER BY position
----
1  id  text
2  name  text
3  owner_id  text
4  privileges  mz_aclitem_array
5  managed  boolean
6  size  text
7  replication_factor  uint4
8  disk  boolean

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_columns' ORDER BY position
----
1  id  text
2  name  text
3  position  uint8
4  nullable  boolean
5  type  text
6  default  text
7  type_oid  oid
8  type_mod  integer

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_connections' ORDER BY position
----
1  id  text
2  oid  oid
3  schema_id  text
4  name  text
5  type  text
6  owner_id  text
7  privileges  mz_aclitem_array

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_databases' ORDER BY position
----
1  id  text
2  oid  oid
3  name  text
4  owner_id  text
5  privileges  mz_aclitem_array

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_default_privileges' ORDER BY position
----
1  role_id  text
2  database_id  text
3  schema_id  text
4  object_type  text
5  grantee  text
6  privileges  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_egress_ips' ORDER BY position
----
1  egress_ip  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_functions' ORDER BY position
----
1  id  text
2  oid  oid
3  schema_id  text
4  name  text
5  argument_type_ids  text[]
6  variadic_argument_type_id  text
7  return_type_id  text
8  returns_set  boolean
9  owner_id  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_indexes' ORDER BY position
----
1  id  text
2  oid  oid
3  name  text
4  on_id  text
5  cluster_id  text
6  owner_id  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_index_columns' ORDER BY position
----
1  index_id  text
2  index_position  uint8
3  on_position  uint8
4  on_expression  text
5  nullable  boolean

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_kafka_connections' ORDER BY position
----
1  id  text
2  brokers  text[]
3  sink_progress_topic  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_kafka_sinks' ORDER BY position
----
1  id  text
2  topic  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_list_types' ORDER BY position
----
1  id  text
2  element_id  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_map_types' ORDER BY position
----
1  id  text
2  key_id   text
3  value_id  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_materialized_views' ORDER BY position
----
1  id  text
2  oid  oid
3  schema_id  text
4  name  text
5  cluster_id  text
6  definition  text
7  owner_id  text
8  privileges  mz_aclitem_array

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_objects' ORDER BY position
----
1  id  text
2  oid  oid
3  schema_id  text
4  name  text
5  type  text
6  owner_id  text
7  privileges  mz_aclitem_array

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_pseudo_types' ORDER BY position
----
1  id  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_relations' ORDER BY position
----
1  id  text
2  oid  oid
3  schema_id  text
4  name  text
5  type  text
6  owner_id  text
7  privileges  mz_aclitem_array

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_roles' ORDER BY position
----
1  id  text
2  oid  oid
3  name  text
4  inherit  boolean

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_role_members' ORDER BY position
----
1  role_id  text
2  member  text
3  grantor  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_schemas' ORDER BY position
----
1  id  text
2  oid  oid
3  database_id  text
4  name  text
5  owner_id  text
6  privileges  mz_aclitem_array

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_secrets' ORDER BY position
----
1  id  text
2  oid  oid
3  schema_id  text
4  name  text
5  owner_id  text
6  privileges  mz_aclitem_array

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_ssh_tunnel_connections' ORDER BY position
----
1  id  text
2  public_key_1  text
3  public_key_2  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_sinks' ORDER BY position
----
1  id  text
2  oid  oid
3  schema_id  text
4  name  text
5  type  text
6  connection_id  text
7  size  text
8  envelope_type  text
9  cluster_id  text
10  owner_id  text

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_sources' ORDER BY position
----
1  id  text
2  oid  oid
3  schema_id  text
4  name  text
5  type  text
6  connection_id  text
7  size  text
8  envelope_type  text
9  cluster_id  text
10  owner_id  text
11  privileges  mz_aclitem_array

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_storage_usage' ORDER BY position
----
1  object_id  text
2  size_bytes  uint8
3  collection_timestamp  timestamp␠with␠time␠zone

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_system_privileges' ORDER BY position
----
1  privileges  mz_aclitem

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_tables' ORDER BY position
----
1  id  text
2  oid  oid
3  schema_id  text
4  name  text
5  owner_id  text
6  privileges  mz_aclitem_array

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_types' ORDER BY position
----
1  id  text
2  oid  oid
3  schema_id  text
4  name  text
5  category  text
6  owner_id  text
7  privileges  mz_aclitem_array

query ITT
SELECT position, name, type FROM objects WHERE schema = 'mz_catalog' AND object = 'mz_views' ORDER BY position
----
1  id  text
2  oid  oid
3  schema_id  text
4  name  text
5  definition  text
6  owner_id  text
7  privileges  mz_aclitem_array

query T
SELECT DISTINCT object FROM objects WHERE schema IN ('mz_catalog') ORDER BY object
----
mz_array_types
mz_audit_events
mz_aws_privatelink_connections
mz_base_types
mz_cluster_replicas
mz_clusters
mz_columns
mz_connections
mz_databases
mz_default_privileges
mz_egress_ips
mz_functions
mz_index_columns
mz_indexes
mz_kafka_connections
mz_kafka_sinks
mz_list_types
mz_map_types
mz_materialized_views
mz_objects
mz_operators
mz_pseudo_types
mz_relations
mz_role_members
mz_roles
mz_schemas
mz_secrets
mz_sinks
mz_sources
mz_ssh_tunnel_connections
mz_storage_usage
mz_system_privileges
mz_tables
mz_types
mz_views
