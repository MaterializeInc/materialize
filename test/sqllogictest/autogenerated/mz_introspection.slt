
# Copyright Materialize, Inc. and contributors. All rights reserved.
#
# Use of this software is governed by the Business Source License
# included in the LICENSE file at the root of this repository.
#
# As of the Change Date specified in that file, in accordance with
# the Business Source License, use of this software will be governed
# by the Apache License, Version 2.0.

# This file is auto-generated by ci/test/lint-docs-catalog.py

mode cockroach

simple conn=mz_system,user=mz_system
ALTER SYSTEM SET unsafe_enable_unstable_dependencies = true
----
COMPLETE 0

statement ok
CREATE VIEW objects AS
  SELECT
    schema.name AS schema,
    objects.name AS object,
    columns.position,
    columns.name,
    columns.type,
    comments.comment
  FROM
    mz_catalog.mz_columns AS columns
    JOIN mz_catalog.mz_objects AS objects ON columns.id = objects.id
    JOIN mz_catalog.mz_schemas AS schema ON objects.schema_id = schema.id
    LEFT JOIN mz_internal.mz_comments AS comments ON columns.id = comments.id AND columns.position = comments.object_sub_id

statement ok
CREATE INDEX objects_idx ON objects(schema, object)

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_active_peeks' ORDER BY position
----
id  uuid  The␠ID␠of␠the␠peek␠request.
object_id  text  The␠ID␠of␠the␠collection␠the␠peek␠is␠targeting.␠Corresponds␠to␠`mz_catalog.mz_indexes.id`,␠`mz_catalog.mz_materialized_views.id`,␠`mz_catalog.mz_sources.id`,␠or␠`mz_catalog.mz_tables.id`.
type  text  The␠type␠of␠the␠corresponding␠peek:␠`index`␠if␠targeting␠an␠index␠or␠temporary␠dataflow;␠`persist`␠for␠a␠source,␠materialized␠view,␠or␠table.
time  mz_timestamp  The␠timestamp␠the␠peek␠has␠requested.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_arrangement_sharing' ORDER BY position
----
operator_id  uint8  The␠ID␠of␠the␠operator␠that␠created␠the␠arrangement.␠Corresponds␠to␠`mz_dataflow_operators.id`.
count  bigint  The␠number␠of␠operators␠that␠share␠the␠arrangement.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_arrangement_sizes' ORDER BY position
----
operator_id  uint8  The␠ID␠of␠the␠operator␠that␠created␠the␠arrangement.␠Corresponds␠to␠`mz_dataflow_operators.id`.
records  numeric  The␠number␠of␠records␠in␠the␠arrangement.
batches  numeric  The␠number␠of␠batches␠in␠the␠arrangement.
size  numeric  The␠utilized␠size␠in␠bytes␠of␠the␠arrangement.
capacity  numeric  The␠capacity␠in␠bytes␠of␠the␠arrangement.␠Can␠be␠larger␠than␠the␠size.
allocations  numeric  The␠number␠of␠separate␠memory␠allocations␠backing␠the␠arrangement.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_compute_error_counts' ORDER BY position
----
export_id  text  The␠ID␠of␠the␠dataflow␠export.␠Corresponds␠to␠`mz_compute_exports.export_id`.
count  numeric  The␠count␠of␠errors␠present␠in␠this␠dataflow␠export.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_compute_exports' ORDER BY position
----
export_id  text  The␠ID␠of␠the␠index,␠materialized␠view,␠or␠subscription␠exported␠by␠the␠dataflow.␠Corresponds␠to␠`mz_catalog.mz_indexes.id`,␠`mz_catalog.mz_materialized_views.id`,␠or␠`mz_internal.mz_subscriptions`.
dataflow_id  uint8  The␠ID␠of␠the␠dataflow.␠Corresponds␠to␠`mz_dataflows.id`.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_compute_frontiers' ORDER BY position
----
export_id  text  The␠ID␠of␠the␠dataflow␠export.␠Corresponds␠to␠`mz_compute_exports.export_id`.
time  mz_timestamp  The␠next␠timestamp␠at␠which␠the␠dataflow␠output␠may␠change.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_compute_import_frontiers' ORDER BY position
----
export_id  text  The␠ID␠of␠the␠dataflow␠export.␠Corresponds␠to␠`mz_compute_exports.export_id`.
import_id  text  The␠ID␠of␠the␠dataflow␠import.␠Corresponds␠to␠`mz_catalog.mz_sources.id`␠or␠`mz_catalog.mz_tables.id`␠or␠`mz_compute_exports.export_id`.
time  mz_timestamp  The␠next␠timestamp␠at␠which␠the␠dataflow␠input␠may␠change.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_compute_operator_durations_histogram' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠operator.␠Corresponds␠to␠`mz_dataflow_operators.id`.
duration_ns  uint8  The␠upper␠bound␠of␠the␠duration␠bucket␠in␠nanoseconds.
count  numeric  The␠(noncumulative)␠count␠of␠invocations␠in␠the␠bucket.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_dataflows' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠dataflow.
name  text  The␠internal␠name␠of␠the␠dataflow.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_dataflow_addresses' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠channel␠or␠operator.␠Corresponds␠to␠`mz_dataflow_channels.id`␠or␠`mz_dataflow_operators.id`.
address  list  A␠list␠of␠scope-local␠indexes␠indicating␠the␠path␠from␠the␠root␠to␠this␠channel␠or␠operator.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_dataflow_arrangement_sizes' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠[dataflow].␠Corresponds␠to␠`mz_dataflows.id`.
name  text  The␠name␠of␠the␠[dataflow].
records  numeric  The␠number␠of␠records␠in␠all␠arrangements␠in␠the␠dataflow.
batches  numeric  The␠number␠of␠batches␠in␠all␠arrangements␠in␠the␠dataflow.
size  numeric  The␠utilized␠size␠in␠bytes␠of␠the␠arrangements.
capacity  numeric  The␠capacity␠in␠bytes␠of␠the␠arrangements.␠Can␠be␠larger␠than␠the␠size.
allocations  numeric  The␠number␠of␠separate␠memory␠allocations␠backing␠the␠arrangements.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_dataflow_channels' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠channel.
from_index  uint8  The␠scope-local␠index␠of␠the␠source␠operator.␠Corresponds␠to␠`mz_dataflow_addresses.address`.
from_port  uint8  The␠source␠operator's␠output␠port.
to_index  uint8  The␠scope-local␠index␠of␠the␠target␠operator.␠Corresponds␠to␠`mz_dataflow_addresses.address`.
to_port  uint8  The␠target␠operator's␠input␠port.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_dataflow_channel_operators' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠channel.␠Corresponds␠to␠`mz_dataflow_channels.id`.
from_operator_id  uint8  The␠ID␠of␠the␠source␠of␠the␠channel.␠Corresponds␠to␠`mz_dataflow_operators.id`.
from_operator_address  list  The␠address␠of␠the␠source␠of␠the␠channel.␠Corresponds␠to␠`mz_dataflow_addresses.address`.
to_operator_id  uint8  The␠ID␠of␠the␠target␠of␠the␠channel.␠Corresponds␠to␠`mz_dataflow_operators.id`.
to_operator_address  list  The␠address␠of␠the␠target␠of␠the␠channel.␠Corresponds␠to␠`mz_dataflow_addresses.address`.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_dataflow_global_ids' ORDER BY position
----
id  uint8  The␠dataflow␠ID.
global_id  text  A␠global␠ID␠associated␠with␠that␠dataflow.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_dataflow_operators' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠operator.
name  text  The␠internal␠name␠of␠the␠operator.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_dataflow_operator_dataflows' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠operator.␠Corresponds␠to␠`mz_dataflow_operators.id`.
name  text  The␠internal␠name␠of␠the␠operator.
dataflow_id  uint8  The␠ID␠of␠the␠dataflow␠hosting␠the␠operator.␠Corresponds␠to␠`mz_dataflows.id`.
dataflow_name  text  The␠internal␠name␠of␠the␠dataflow␠hosting␠the␠operator.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_dataflow_operator_parents' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠operator.␠Corresponds␠to␠`mz_dataflow_operators.id`.
parent_id  uint8  The␠ID␠of␠the␠operator's␠parent␠operator.␠Corresponds␠to␠`mz_dataflow_operators.id`.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_dataflow_shutdown_durations_histogram' ORDER BY position
----
duration_ns  uint8  The␠upper␠bound␠of␠the␠bucket␠in␠nanoseconds.
count  numeric  The␠(noncumulative)␠count␠of␠dataflows␠in␠this␠bucket.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_expected_group_size_advice' ORDER BY position
----
dataflow_id  uint8  The␠ID␠of␠the␠[dataflow].␠Corresponds␠to␠`mz_dataflows.id`.
dataflow_name  text  The␠internal␠name␠of␠the␠dataflow␠hosting␠the␠min/max␠aggregation␠or␠Top␠K.
region_id  uint8  The␠ID␠of␠the␠root␠operator␠scope.␠Corresponds␠to␠`mz_dataflow_operators.id`.
region_name  text  The␠internal␠name␠of␠the␠root␠operator␠scope␠for␠the␠min/max␠aggregation␠or␠Top␠K.
levels  bigint  The␠number␠of␠levels␠in␠the␠hierarchical␠scheme␠implemented␠by␠the␠region.
to_cut  bigint  The␠number␠of␠levels␠that␠can␠be␠eliminated␠(cut)␠from␠the␠region's␠hierarchy.
savings  numeric  A␠conservative␠estimate␠of␠the␠amount␠of␠memory␠in␠bytes␠to␠be␠saved␠by␠applying␠the␠hint.
hint  double␠precision  The␠hint␠value␠that␠will␠eliminate␠`to_cut`␠levels␠from␠the␠region's␠hierarchy.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_mappable_objects' ORDER BY position
----
name  text  The␠name␠of␠the␠object.
global_id  text  The␠global␠ID␠of␠the␠object.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_lir_mapping' ORDER BY position
----
global_id  text  The␠global␠ID.
lir_id  uint8  The␠LIR␠node␠ID.
operator  text  The␠LIR␠operator,␠in␠the␠format␠`OperatorName␠INPUTS␠[OPTIONS]`.
parent_lir_id  uint8  The␠parent␠of␠this␠LIR␠node.␠May␠be␠`NULL`.
nesting  uint2  The␠nesting␠level␠of␠this␠LIR␠node.
operator_id_start  uint8  The␠first␠dataflow␠operator␠ID␠implementing␠this␠LIR␠operator␠(inclusive).
operator_id_end  uint8  The␠first␠dataflow␠operator␠ID␠_after_␠this␠LIR␠operator␠(exclusive).

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_message_counts' ORDER BY position
----
channel_id  uint8  The␠ID␠of␠the␠channel.␠Corresponds␠to␠`mz_dataflow_channels.id`.
sent  numeric  The␠number␠of␠messages␠sent.
received  numeric  The␠number␠of␠messages␠received.
batch_sent  numeric  The␠number␠of␠batches␠sent.
batch_received  numeric  The␠number␠of␠batches␠received.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_peek_durations_histogram' ORDER BY position
----
type  text  The␠peek␠variant:␠`index`␠or␠`persist`.
duration_ns  uint8  The␠upper␠bound␠of␠the␠bucket␠in␠nanoseconds.
count  numeric  The␠(noncumulative)␠count␠of␠peeks␠in␠this␠bucket.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_records_per_dataflow' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠dataflow.␠Corresponds␠to␠`mz_dataflows.id`.
name  text  The␠internal␠name␠of␠the␠dataflow.
records  numeric  The␠number␠of␠records␠in␠the␠dataflow.
batches  numeric  The␠number␠of␠batches␠in␠the␠dataflow.
size  numeric  The␠utilized␠size␠in␠bytes␠of␠the␠arrangements.
capacity  numeric  The␠capacity␠in␠bytes␠of␠the␠arrangements.␠Can␠be␠larger␠than␠the␠size.
allocations  numeric  The␠number␠of␠separate␠memory␠allocations␠backing␠the␠arrangements.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_records_per_dataflow_operator' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠operator.␠Corresponds␠to␠`mz_dataflow_operators.id`.
name  text  The␠internal␠name␠of␠the␠operator.
dataflow_id  uint8  The␠ID␠of␠the␠dataflow.␠Corresponds␠to␠`mz_dataflows.id`.
records  numeric  The␠number␠of␠records␠in␠the␠operator.
batches  numeric  The␠number␠of␠batches␠in␠the␠dataflow.
size  numeric  The␠utilized␠size␠in␠bytes␠of␠the␠arrangement.
capacity  numeric  The␠capacity␠in␠bytes␠of␠the␠arrangement.␠Can␠be␠larger␠than␠the␠size.
allocations  numeric  The␠number␠of␠separate␠memory␠allocations␠backing␠the␠arrangement.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_scheduling_elapsed' ORDER BY position
----
id  uint8  The␠ID␠of␠the␠operator.␠Corresponds␠to␠`mz_dataflow_operators.id`.
elapsed_ns  numeric  The␠total␠elapsed␠time␠spent␠in␠the␠operator␠in␠nanoseconds.

query TTT
SELECT name, type, comment FROM objects WHERE schema = 'mz_introspection' AND object = 'mz_scheduling_parks_histogram' ORDER BY position
----
slept_for_ns  uint8  The␠actual␠length␠of␠the␠park␠event␠in␠nanoseconds.
requested_ns  uint8  The␠requested␠length␠of␠the␠park␠event␠in␠nanoseconds.
count  numeric  The␠(noncumulative)␠count␠of␠park␠events␠in␠this␠bucket.

query T
SELECT DISTINCT object FROM objects WHERE schema IN ('mz_introspection') ORDER BY object
----
mz_active_peeks
mz_active_peeks_per_worker
mz_arrangement_batcher_allocations_raw
mz_arrangement_batcher_capacity_raw
mz_arrangement_batcher_records_raw
mz_arrangement_batcher_size_raw
mz_arrangement_batches_raw
mz_arrangement_heap_allocations_raw
mz_arrangement_heap_capacity_raw
mz_arrangement_heap_size_raw
mz_arrangement_records_raw
mz_arrangement_sharing
mz_arrangement_sharing_per_worker
mz_arrangement_sharing_raw
mz_arrangement_sizes
mz_arrangement_sizes_per_worker
mz_compute_dataflow_global_ids_per_worker
mz_compute_error_counts
mz_compute_error_counts_per_worker
mz_compute_error_counts_raw
mz_compute_exports
mz_compute_exports_per_worker
mz_compute_frontiers
mz_compute_frontiers_per_worker
mz_compute_hydration_times_per_worker
mz_compute_import_frontiers
mz_compute_import_frontiers_per_worker
mz_compute_lir_mapping_per_worker
mz_compute_operator_durations_histogram
mz_compute_operator_durations_histogram_per_worker
mz_compute_operator_durations_histogram_raw
mz_dataflow_addresses
mz_dataflow_addresses_per_worker
mz_dataflow_arrangement_sizes
mz_dataflow_channel_operators
mz_dataflow_channel_operators_per_worker
mz_dataflow_channels
mz_dataflow_channels_per_worker
mz_dataflow_global_ids
mz_dataflow_operator_dataflows
mz_dataflow_operator_dataflows_per_worker
mz_dataflow_operator_parents
mz_dataflow_operator_parents_per_worker
mz_dataflow_operator_reachability
mz_dataflow_operator_reachability_per_worker
mz_dataflow_operator_reachability_raw
mz_dataflow_operators
mz_dataflow_operators_per_worker
mz_dataflow_shutdown_durations_histogram
mz_dataflow_shutdown_durations_histogram_per_worker
mz_dataflow_shutdown_durations_histogram_raw
mz_dataflows
mz_dataflows_per_worker
mz_expected_group_size_advice
mz_lir_mapping
mz_mappable_objects
mz_message_batch_counts_received_raw
mz_message_batch_counts_sent_raw
mz_message_counts
mz_message_counts_per_worker
mz_message_counts_received_raw
mz_message_counts_sent_raw
mz_peek_durations_histogram
mz_peek_durations_histogram_per_worker
mz_peek_durations_histogram_raw
mz_records_per_dataflow
mz_records_per_dataflow_operator
mz_records_per_dataflow_operator_per_worker
mz_records_per_dataflow_per_worker
mz_scheduling_elapsed
mz_scheduling_elapsed_per_worker
mz_scheduling_elapsed_raw
mz_scheduling_parks_histogram
mz_scheduling_parks_histogram_per_worker
mz_scheduling_parks_histogram_raw
